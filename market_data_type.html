<!-- HTML header for doxygen 1.8.4-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>TWS API v9.72+: Market Data Types</title>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="https://www.interactivebrokers.com/favicon.ico" rel="shortcut icon">
<script>
$(document).ready(function(){
		var picked=getCookie("picked");
		if (picked != "") {
			if (!$(this).hasClass("active")) {
				var tabNum = $(this).index();
				var nthChild = picked;
				$("ul#tabs li.active").removeClass("active");
				$(this).addClass("active");
				$("ul#tab li.active").removeClass("active");
				$("ul#tab li:nth-child("+nthChild+")").addClass("active");
				$("ul#tabs li:nth-child("+nthChild+")").addClass("active");
				setCookie("picked", nthChild, 1);
			}
		}
		$("ul#tabs li").click(function(e){
			if (!$(this).hasClass("active")) {
			var tabNum = $(this).index();
			var nthChild = tabNum+1;
			$("ul#tabs li.active").removeClass("active");
			$(this).addClass("active");
			$("ul#tab li.active").removeClass("active");
			$("ul#tab li:nth-child("+nthChild+")").addClass("active");
			setCookie("picked", nthChild, 1);
		}
    });
});
function setCookie(cname, cvalue, exdays) {
    var d = new Date();
    d.setTime(d.getTime() + (exdays*24*60*60*1000));
    var expires = "expires="+d.toUTCString();
    document.cookie = cname + "=" + cvalue + "; " + expires;
} 
function getCookie(cname) {
    var name = cname + "=";
    var ca = document.cookie.split(';');
    for(var i=0; i<ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1);
        if (c.indexOf(name) == 0) return c.substring(name.length,c.length);
    }
    return "";
} 
function checkCookie() {
    var picked=getCookie("picked");
    if (picked != "") {
        alert("Welcome again " + picked);
    }else{
        //username = prompt("Please enter your name:", "");
        if (picked != "" && picked != null) {
            setCookie("picked", 1, 365);
        }
    }
}
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ib_theme.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" style="background-color:black;">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr>
  <td id="projectlogo"><img alt="Logo" src="nav_iblogo.png"/></a></td>
  <td style="padding: 0 0 0 1em;">
   <ul id="tabs"><li class="active">C#</li><li>Java</li><li>VB</li><li>C++</li><li>Python</li></ul>
  </td>
  <td><a href="https://www.interactivebrokers.com/en/index.php?f=customerService&p=email" style="color:#C7C7C7;font-weight:bold;padding: 0 0 0 1em;">Contact us</a></td>
  <!--BEGIN GCS_SEARCHBOX-->
  <td style="position: absolute; right: 0;">
   <div id="google-custom-search" align="right" style="vertical-align: top;">
   <script>
  (function() {
    var cx = '002885114636493240026:q6smajphkxq';
	var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
	</script>
	<gcse:search newWindow="false" enableHistory="true"></gcse:search>
   </div>
   </td>
  <!--END !GCS_SEARCHBOX-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('market_data_type.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Market Data Types </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The API can request Live, Frozen, Delayed and Delayed Frozen market data from Trader Workstation by switching market data type via the <a class="el" href="classIBApi_1_1EClient.html#ae03b31bb2702ba519ed63c46455872b6">IBApi.EClient.reqMarketDataType</a> before making a market data request with reqMktData. A successful switch to a different (non-live) market data type for a particular market data request will be indicated by a callback to <a class="el" href="interfaceIBApi_1_1EWrapper.html#a79918660257f0e7ce77309bf3bccf13c" title="Returns the market data type (real-time, frozen, delayed, delayed-frozen) of ticker sent by EClientSo...">IBApi::EWrapper::marketDataType</a> with the ticker ID of the market data request which is returning a different type of data.</p>
<table class="doxtable">
<tr>
<th>Market Data Type</th><th>ID</th><th>Description </th></tr>
<tr>
<td>Live</td><td>1</td><td>Live market data is streaming data relayed back in real time. Market data subscriptions are required to receive live market data.  </td></tr>
<tr>
<td>Frozen</td><td>2 </td><td>Frozen market data is the last data recorded at market close. In TWS, Frozen data is displayed in gray numbers. When you set the market data type to Frozen, you are asking TWS to send the last available quote when there is not one currently available. For instance, if a market is currently closed and real time data is requested, -1 values will commonly be returned for the bid and ask prices to indicate there is no current bid/ask data available. TWS will often show a 'frozen' bid/ask which represents the last value recorded by the system. To receive the last know bid/ask price before the market close, switch to market data type 2 from the API before requesting market data. API frozen data requires TWS/IBG v.962 or higher and the same market data subscriptions necessary for real time streaming data.   </td></tr>
<tr>
<td>Delayed</td><td>3 </td><td><p class="starttd">Free, delayed data is 15 - 20 minutes delayed. In TWS, delayed data is displayed in brown background. When you set market data type to delayed, you are telling TWS to automatically switch to delayed market data if the user does not have the necessary real time data subscription. If live data is available a request for delayed data would be ignored by TWS. Delayed market data is returned with delayed <a class="el" href="tick_types.html">Tick Types</a> (Tick ID 66~76).</p>
<p class="endtd">Note: TWS Build 962 or higher is required and API version 9.72.18 or higher is suggested.   </p>
</td></tr>
<tr>
<td>Delayed Frozen</td><td>4</td><td>Requests delayed "frozen" data for a user without market data subscriptions. </td></tr>
</table>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            <span class="comment">/*** Switch to live (1) frozen (2) delayed (3) or delayed frozen (4)***/</span></div>
<div class="line">            client.reqMarketDataType(2);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        <span class="comment">/*** Switch to live (1) frozen (2) delayed (3) or delayed frozen (4)***/</span></div>
<div class="line">        client.reqMarketDataType(2);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        <span class="stringliteral">&#39;*** Switch to live (1) frozen (2) delayed (3) or delayed frozen (4)***/</span></div>
<div class="line"><span class="stringliteral">        client.reqMarketDataType(1)</span></div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    <span class="comment">/*** By default only real-time (1) market data is enabled</span></div>
<div class="line"><span class="comment">         Sending frozen (2) enables frozen market data</span></div>
<div class="line"><span class="comment">         Sending delayed (3) enables delayed market data and disables delayed-frozen market data</span></div>
<div class="line"><span class="comment">         Sending delayed-frozen (4) enables delayed and delayed-frozen market data</span></div>
<div class="line"><span class="comment">         Sending real-time (1) disables frozen, delayed and delayed-frozen market data ***/</span></div>
<div class="line">    m_pClient-&gt;reqMarketDataType(2);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;        <span class="comment"># Switch to live (1) frozen (2) delayed (3) delayed frozen (4).</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;        self.reqMarketDataType(MarketDataTypeEnum.DELAYED)</div>
</div><!-- fragment -->  </li>
</ul>
<p>After invoking <a class="el" href="classIBApi_1_1EClient.html#ae03b31bb2702ba519ed63c46455872b6">IBApi.EClient.reqMarketDataType</a> to fetch frozen or delayed data, subsequent  <a class="el" href="classIBApi_1_1EClient.html#a7a19258a3a2087c07c1c57b93f659b63" title="Requests real time market data. This function will return the product&#39;s market data. It is important to notice that only real time data can be delivered via the API. ">IBApi::EClient::reqMktData</a> requests will trigger <a class="el" href="interfaceIBApi_1_1EWrapper.html#a79918660257f0e7ce77309bf3bccf13c">IBApi.EWrapper.marketDataType</a> as one of the resulting events to indicate the data type (2 or 3) of the returned data.</p>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">    <span class="keyword">public</span> <span class="keyword">class </span>EWrapperImpl : EWrapper </div>
<div class="line">    {</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> marketDataType(<span class="keywordtype">int</span> reqId, <span class="keywordtype">int</span> marketDataType)</div>
<div class="line">        {</div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;MarketDataType. &quot;</span>+reqId+<span class="stringliteral">&quot;, Type: &quot;</span>+marketDataType+<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">        }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">class </span>EWrapperImpl <span class="keyword">implements</span> EWrapper {</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">    @Override</div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> marketDataType(<span class="keywordtype">int</span> reqId, <span class="keywordtype">int</span> marketDataType) {</div>
<div class="line">        System.out.println(<span class="stringliteral">&quot;MarketDataType. [&quot;</span>+reqId+<span class="stringliteral">&quot;], Type: [&quot;</span>+marketDataType+<span class="stringliteral">&quot;]\n&quot;</span>);</div>
<div class="line">    }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Public Class EWrapperImpl</div>
<div class="line">        Implements EWrapper</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        Public Sub marketDataType(reqId As Integer, marketDataType As Integer) Implements IBApi.EWrapper.marketDataType</div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;MarketDataType - ReqId [&quot;</span> &amp; reqId &amp; <span class="stringliteral">&quot;] MarketDataType [&quot;</span> &amp; marketDataType &amp; <span class="stringliteral">&quot;]&quot;</span>)</div>
<div class="line">        End Sub</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><span class="keyword">class </span>TestCppClient : <span class="keyword">public</span> EWrapper</div>
<div class="line">{</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><span class="keywordtype">void</span> TestCppClient::marketDataType(TickerId reqId, <span class="keywordtype">int</span> marketDataType) {</div>
<div class="line">    printf( <span class="stringliteral">&quot;MarketDataType. ReqId: %ld, Type: %d\n&quot;</span>, reqId, marketDataType);</div>
<div class="line">}</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">class </span>TestWrapper(wrapper.EWrapper):</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;    <span class="keyword">def </span>marketDataType(self, reqId: TickerId, marketDataType: int):</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;        super().marketDataType(reqId, marketDataType)</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;        print(<span class="stringliteral">&quot;MarketDataType. &quot;</span>, reqId, <span class="stringliteral">&quot;Type:&quot;</span>, marketDataType)</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div>
</div><!-- fragment -->  </li>
</ul>
<p><br/>
<br/>
 </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.4-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">This website uses cookies. By navigating through it you agree to the use of cookies. Copyright Interactive Brokers 2016 </li>
  </ul>
</div>
<!--BEGIN GCS_SEARCHBOX-->
<style type='text/css'>
	.gsc-control-cse{
		font family: Arial, sans-serif;
		border-color: #000100;
		background-color: #000000;
		width:260px;
		height: 20px;
		padding-top: 6px;
	}
	input.gsc-search-button {
		background-color: #6D1800;
		color: #fff;
		cursor: pointer;
	}
	input.gsc-search-button:hover {
		background-color: #A02200;
	}
	td.gsc-clear-button {
		position: relative;
		right: 85px;
	}
  }
</style>
<!--END GCS_SEARCHBOX-->
</body>
</html>
