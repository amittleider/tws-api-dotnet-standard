<!-- HTML header for doxygen 1.8.4-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>TWS API v9.72+: Placing Orders</title>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="https://www.interactivebrokers.com/favicon.ico" rel="shortcut icon">
<script>
$(document).ready(function(){
		var picked=getCookie("picked");
		if (picked != "") {
			if (!$(this).hasClass("active")) {
				var tabNum = $(this).index();
				var nthChild = picked;
				$("ul#tabs li.active").removeClass("active");
				$(this).addClass("active");
				$("ul#tab li.active").removeClass("active");
				$("ul#tab li:nth-child("+nthChild+")").addClass("active");
				$("ul#tabs li:nth-child("+nthChild+")").addClass("active");
				setCookie("picked", nthChild, 1);
			}
		}
		$("ul#tabs li").click(function(e){
			if (!$(this).hasClass("active")) {
			var tabNum = $(this).index();
			var nthChild = tabNum+1;
			$("ul#tabs li.active").removeClass("active");
			$(this).addClass("active");
			$("ul#tab li.active").removeClass("active");
			$("ul#tab li:nth-child("+nthChild+")").addClass("active");
			setCookie("picked", nthChild, 1);
		}
    });
});
function setCookie(cname, cvalue, exdays) {
    var d = new Date();
    d.setTime(d.getTime() + (exdays*24*60*60*1000));
    var expires = "expires="+d.toUTCString();
    document.cookie = cname + "=" + cvalue + "; " + expires;
} 
function getCookie(cname) {
    var name = cname + "=";
    var ca = document.cookie.split(';');
    for(var i=0; i<ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1);
        if (c.indexOf(name) == 0) return c.substring(name.length,c.length);
    }
    return "";
} 
function checkCookie() {
    var picked=getCookie("picked");
    if (picked != "") {
        alert("Welcome again " + picked);
    }else{
        //username = prompt("Please enter your name:", "");
        if (picked != "" && picked != null) {
            setCookie("picked", 1, 365);
        }
    }
}
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ib_theme.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" style="background-color:black;">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr>
  <td id="projectlogo"><img alt="Logo" src="nav_iblogo.png"/></a></td>
  <td style="padding: 0 0 0 1em;">
   <ul id="tabs"><li class="active">C#</li><li>Java</li><li>VB</li><li>C++</li><li>Python</li></ul>
  </td>
  <td><a href="https://www.interactivebrokers.com/en/index.php?f=customerService&p=email" style="color:#C7C7C7;font-weight:bold;padding: 0 0 0 1em;">Contact us</a></td>
  <!--BEGIN GCS_SEARCHBOX-->
  <td style="position: absolute; right: 0;">
   <div id="google-custom-search" align="right" style="vertical-align: top;">
   <script>
  (function() {
    var cx = '002885114636493240026:q6smajphkxq';
	var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
	</script>
	<gcse:search newWindow="false" enableHistory="true"></gcse:search>
   </div>
   </td>
  <!--END !GCS_SEARCHBOX-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('order_submission.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Placing Orders </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="next_valid_id"></a>
The Next Valid Identifier</h1>
<p>Perhaps the most important event received after successfully connecting to the TWS is the <a class="el" href="interfaceIBApi_1_1EWrapper.html#a09c07727efd297e438690ab42838d332">IBApi.EWrapper.nextValidId</a>, which is also triggered after invoking the <a class="el" href="classIBApi_1_1EClient.html#aecea365530f40e7b56529238c9dd2f4a">IBApi.EClient.reqIds</a> method. As its name indicates, the nextValidId event provides the next valid identifier needed to place an order. This identifier is nothing more than the next number in the sequence. This means that if there is a single client application submitting orders to an account, it does not have to obtain a new valid identifier every time it needs to submit a new order. It is enough to increase the last value received from the nextValidId method by one. For example, if the valid identifier for your first API order is 1, the next valid identifier would be 2 and so on.</p>
<p>However if there are multiple client applications connected to one account, it is necessary to use an order ID with new orders which is greater than all previous order IDs returned to the client application in openOrder or orderStatus callbacks. For instance, if the client is set as the Master client, it will automatically receive order status and trade callbacks from orders placed from other clients. In such a case, any orderID used in placeOrder must be greater than the orderIDs returned in these status callbacks. Alternatively if the function reqAllOpenOrders is used by a client, subsequent orders placed by that client must have order IDs greater than the order IDs of all orders returned because of that function call. You can always use the <a class="el" href="classIBApi_1_1EClient.html#aecea365530f40e7b56529238c9dd2f4a">IBApi.EClient.reqIds</a> method in the event that your client application loses track of the sequence.</p>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            <span class="comment">//The parameter is always ignored.</span></div>
<div class="line">            client.reqIds(-1);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        <span class="comment">//The parameter is always ignored.</span></div>
<div class="line">        client.reqIds(-1);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        <span class="stringliteral">&#39;The parameter Is always ignored.</span></div>
<div class="line"><span class="stringliteral">        client.reqIds(-1)</span></div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    <span class="comment">//The parameter is always ignored.</span></div>
<div class="line">    m_pClient-&gt;reqIds(-1);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;        <span class="comment">#The parameter is always ignored.</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;        self.reqIds(-1)</div>
</div><!-- fragment -->  </li>
</ul>
<p>The above will result in <a class="el" href="interfaceIBApi_1_1EWrapper.html#a09c07727efd297e438690ab42838d332">IBApi.EWrapper.nextValidId</a> callback being invoked:</p>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">    <span class="keyword">public</span> <span class="keyword">class </span>EWrapperImpl : EWrapper </div>
<div class="line">    {</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> nextValidId(<span class="keywordtype">int</span> orderId) </div>
<div class="line">        {</div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;Next Valid Id: &quot;</span>+orderId);</div>
<div class="line">            NextOrderId = orderId;</div>
<div class="line">        }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">class </span>EWrapperImpl <span class="keyword">implements</span> EWrapper {</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">    @Override</div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> nextValidId(<span class="keywordtype">int</span> orderId) {</div>
<div class="line">        System.out.println(<span class="stringliteral">&quot;Next Valid Id: [&quot;</span>+orderId+<span class="stringliteral">&quot;]&quot;</span>);</div>
<div class="line">        currentOrderId = orderId;</div>
<div class="line">    }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Public Class EWrapperImpl</div>
<div class="line">        Implements EWrapper</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        Public Sub nextValidId(orderId As Integer) Implements IBApi.EWrapper.nextValidId</div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;NextValidId - OrderId [&quot;</span> &amp; orderId &amp; <span class="stringliteral">&quot;]&quot;</span>)</div>
<div class="line">            nextOrderId = orderId</div>
<div class="line">        End Sub</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><span class="keyword">class </span>TestCppClient : <span class="keyword">public</span> EWrapper</div>
<div class="line">{</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><span class="keywordtype">void</span> TestCppClient::nextValidId( OrderId orderId)</div>
<div class="line">{</div>
<div class="line">    printf(<span class="stringliteral">&quot;Next Valid Id: %ld\n&quot;</span>, orderId);</div>
<div class="line">    m_orderId = orderId;</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">class </span>TestWrapper(wrapper.EWrapper):</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;    <span class="keyword">def </span>nextValidId(self, orderId:int):</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;        super().nextValidId(orderId)</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;        logging.debug(<span class="stringliteral">&quot;setting nextValidOrderId: %d&quot;</span>, orderId)</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;        self.nextValidOrderId = orderId</div>
</div><!-- fragment -->  </li>
</ul>
<p><b>The next valid identifier is persistent between TWS sessions.</b></p>
<p>If necessary, you can reset the order ID sequence within the API Settings dialogue. Note however that the order sequence Id can only be reset if there are no active orders.</p>
<div class="image">
<img src="order_id_reset.png" alt="order_id_reset.png"/>
</div>
<h1><a class="anchor" id="submission"></a>
Order Submission</h1>
<p>Orders are submitted via the <a class="el" href="classIBApi_1_1EClient.html#aa6ff6f6455c551bef9d66c34d1c8586c">IBApi.EClient.placeOrder</a> method. From the snippet below, note how a variable holding the nextValidId is incremented automatically:</p>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            client.placeOrder(nextOrderId++, ContractSamples.USStock(), OrderSamples.LimitOrder(<span class="stringliteral">&quot;SELL&quot;</span>, 1, 50));</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        client.placeOrder(nextOrderId++, ContractSamples.USStock(), OrderSamples.LimitOrder(<span class="stringliteral">&quot;SELL&quot;</span>, 1, 50));</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        client.placeOrder(increment(nextOrderId), ContractSamples.USStock(), OrderSamples.LimitOrder(<span class="stringliteral">&quot;SELL&quot;</span>, 1, 50))</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    m_pClient-&gt;placeOrder(m_orderId++, ContractSamples::USStock(), OrderSamples::LimitOrder(<span class="stringliteral">&quot;SELL&quot;</span>, 1, 50));</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;        self.simplePlaceOid = self.nextOrderId()</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;        self.placeOrder(self.simplePlaceOid, ContractSamples.USStock(), </div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;                        OrderSamples.LimitOrder(<span class="stringliteral">&quot;SELL&quot;</span>, 1, 50))</div>
</div><!-- fragment -->  </li>
</ul>
<p>Immediately after the order was submitted correctly, the TWS will start sending events concerning the order's activity via <a class="el" href="interfaceIBApi_1_1EWrapper.html#aa05258f1d005accd3efc0d60bc151407">IBApi.EWrapper.openOrder</a> and <a class="el" href="interfaceIBApi_1_1EWrapper.html#a225c060ff9653cfaeff7304033eb76b3">IBApi.EWrapper.orderStatus</a></p>
<h1><a class="anchor" id="open_order"></a>
The openOrder method</h1>
<p>The <a class="el" href="interfaceIBApi_1_1EWrapper.html#aa05258f1d005accd3efc0d60bc151407">IBApi.EWrapper.openOrder</a> method delivers an <a class="el" href="classIBApi_1_1Order.html">IBApi.Order</a> object representing the open order within the system. Additionally, an <a class="el" href="classIBApi_1_1OrderState.html">IBApi.OrderState</a> object containing margin and commission information about this particular order.</p>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">    <span class="keyword">public</span> <span class="keyword">class </span>EWrapperImpl : EWrapper </div>
<div class="line">    {</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> openOrder(<span class="keywordtype">int</span> orderId, Contract contract, Order order, OrderState orderState)</div>
<div class="line">        {</div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;OpenOrder. ID: &quot;</span>+orderId+<span class="stringliteral">&quot;, &quot;</span>+contract.Symbol+<span class="stringliteral">&quot;, &quot;</span>+contract.SecType+<span class="stringliteral">&quot; @ &quot;</span>+contract.Exchange+<span class="stringliteral">&quot;: &quot;</span>+order.Action+<span class="stringliteral">&quot;, &quot;</span>+order.OrderType+<span class="stringliteral">&quot; &quot;</span>+order.TotalQuantity+<span class="stringliteral">&quot;, &quot;</span>+orderState.Status);</div>
<div class="line">        }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">class </span>EWrapperImpl <span class="keyword">implements</span> EWrapper {</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">    @Override</div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> openOrder(<span class="keywordtype">int</span> orderId, Contract contract, Order order,</div>
<div class="line">            OrderState orderState) {</div>
<div class="line">        System.out.println(<span class="stringliteral">&quot;OpenOrder. ID: &quot;</span>+orderId+<span class="stringliteral">&quot;, &quot;</span>+contract.symbol()+<span class="stringliteral">&quot;, &quot;</span>+contract.secType()+<span class="stringliteral">&quot; @ &quot;</span>+contract.exchange()+<span class="stringliteral">&quot;: &quot;</span>+</div>
<div class="line">            order.action()+<span class="stringliteral">&quot;, &quot;</span>+order.orderType()+<span class="stringliteral">&quot; &quot;</span>+order.totalQuantity()+<span class="stringliteral">&quot;, &quot;</span>+orderState.status());</div>
<div class="line">    }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Public Class EWrapperImpl</div>
<div class="line">        Implements EWrapper</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        Public Sub openOrder(orderId As Integer, contract As IBApi.Contract, order As IBApi.Order, orderState As IBApi.OrderState) Implements IBApi.EWrapper.openOrder</div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;OpenOrder. ID: &quot;</span> &amp; orderId &amp; <span class="stringliteral">&quot;, &quot;</span> &amp; contract.Symbol &amp; <span class="stringliteral">&quot;, &quot;</span> &amp; contract.SecType &amp; <span class="stringliteral">&quot; @ &quot;</span> &amp; contract.Exchange &amp;</div>
<div class="line">                          <span class="stringliteral">&quot;: &quot;</span> &amp; order.Action &amp; <span class="stringliteral">&quot;, &quot;</span> &amp; order.OrderType &amp; <span class="stringliteral">&quot; &quot;</span> &amp; order.TotalQuantity &amp; <span class="stringliteral">&quot;, &quot;</span> &amp; orderState.Status)</div>
<div class="line">        End Sub</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><span class="keyword">class </span>TestCppClient : <span class="keyword">public</span> EWrapper</div>
<div class="line">{</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><span class="keywordtype">void</span> TestCppClient::openOrder( OrderId orderId, <span class="keyword">const</span> Contract&amp; contract, <span class="keyword">const</span> Order&amp; order, <span class="keyword">const</span> OrderState&amp; ostate) {</div>
<div class="line">    printf( <span class="stringliteral">&quot;OpenOrder. ID: %ld, %s, %s @ %s: %s, %s, %g, %g, %s\n&quot;</span>, orderId, contract.symbol.c_str(), contract.secType.c_str(), contract.exchange.c_str(), order.action.c_str(), order.orderType.c_str(), order.totalQuantity, order.cashQty == UNSET_DOUBLE ? 0 : order.cashQty, ostate.status.c_str());</div>
<div class="line">}</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">class </span>TestWrapper(wrapper.EWrapper):</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;    <span class="keyword">def </span>openOrder(self, orderId:OrderId, contract:Contract, order:Order, </div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;                  orderState:OrderState):</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;        super().openOrder(orderId, contract, order, orderState)</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;        print(<span class="stringliteral">&quot;OpenOrder. ID:&quot;</span>, orderId, contract.symbol, contract.secType,</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;            <span class="stringliteral">&quot;@&quot;</span>, contract.exchange, <span class="stringliteral">&quot;:&quot;</span>, order.action, order.orderType,</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;            order.totalQuantity, orderState.status)</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="order_status"></a>
The orderStatus method</h1>
<p>The <a class="el" href="interfaceIBApi_1_1EWrapper.html#a225c060ff9653cfaeff7304033eb76b3">IBApi.EWrapper.orderStatus</a> method contains all relevant information on the current status of the order execution-wise (i.e. amount filled and pending, filling price, etc.).</p>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">    <span class="keyword">public</span> <span class="keyword">class </span>EWrapperImpl : EWrapper </div>
<div class="line">    {</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> orderStatus(<span class="keywordtype">int</span> orderId, <span class="keywordtype">string</span> status, <span class="keywordtype">double</span> filled, <span class="keywordtype">double</span> remaining, <span class="keywordtype">double</span> avgFillPrice, <span class="keywordtype">int</span> permId, <span class="keywordtype">int</span> parentId, <span class="keywordtype">double</span> lastFillPrice, <span class="keywordtype">int</span> clientId, <span class="keywordtype">string</span> whyHeld)</div>
<div class="line">        {</div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;OrderStatus. Id: &quot;</span>+orderId+<span class="stringliteral">&quot;, Status: &quot;</span>+status+<span class="stringliteral">&quot;, Filled&quot;</span>+filled+<span class="stringliteral">&quot;, Remaining: &quot;</span>+remaining</div>
<div class="line">                +<span class="stringliteral">&quot;, AvgFillPrice: &quot;</span>+avgFillPrice+<span class="stringliteral">&quot;, PermId: &quot;</span>+permId+<span class="stringliteral">&quot;, ParentId: &quot;</span>+parentId+<span class="stringliteral">&quot;, LastFillPrice: &quot;</span>+lastFillPrice+<span class="stringliteral">&quot;, ClientId: &quot;</span>+clientId+<span class="stringliteral">&quot;, WhyHeld: &quot;</span>+whyHeld);</div>
<div class="line">        }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">class </span>EWrapperImpl <span class="keyword">implements</span> EWrapper {</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">    @Override</div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> orderStatus(<span class="keywordtype">int</span> orderId, String status, <span class="keywordtype">double</span> filled,</div>
<div class="line">            <span class="keywordtype">double</span> remaining, <span class="keywordtype">double</span> avgFillPrice, <span class="keywordtype">int</span> permId, <span class="keywordtype">int</span> parentId,</div>
<div class="line">            <span class="keywordtype">double</span> lastFillPrice, <span class="keywordtype">int</span> clientId, String whyHeld) {</div>
<div class="line">        System.out.println(<span class="stringliteral">&quot;OrderStatus. Id: &quot;</span>+orderId+<span class="stringliteral">&quot;, Status: &quot;</span>+status+<span class="stringliteral">&quot;, Filled&quot;</span>+filled+<span class="stringliteral">&quot;, Remaining: &quot;</span>+remaining</div>
<div class="line">                +<span class="stringliteral">&quot;, AvgFillPrice: &quot;</span>+avgFillPrice+<span class="stringliteral">&quot;, PermId: &quot;</span>+permId+<span class="stringliteral">&quot;, ParentId: &quot;</span>+parentId+<span class="stringliteral">&quot;, LastFillPrice: &quot;</span>+lastFillPrice+</div>
<div class="line">                <span class="stringliteral">&quot;, ClientId: &quot;</span>+clientId+<span class="stringliteral">&quot;, WhyHeld: &quot;</span>+whyHeld);</div>
<div class="line">    }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Public Class EWrapperImpl</div>
<div class="line">        Implements EWrapper</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        Public Sub orderStatus(orderId As Integer, status As String, filled As Double, remaining As Double, avgFillPrice As Double, permId As Integer, parentId As Integer, lastFillPrice As Double, clientId As Integer, whyHeld As String) Implements IBApi.EWrapper.orderStatus</div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;OrderStatus. Id: &quot;</span> &amp; orderId &amp; <span class="stringliteral">&quot;, Status: &quot;</span> &amp; status &amp; <span class="stringliteral">&quot;, Filled&quot;</span> &amp; filled &amp; <span class="stringliteral">&quot;, Remaining: &quot;</span> &amp; remaining &amp;</div>
<div class="line">                <span class="stringliteral">&quot;, AvgFillPrice: &quot;</span> &amp; avgFillPrice &amp; <span class="stringliteral">&quot;, PermId: &quot;</span> &amp; permId &amp; <span class="stringliteral">&quot;, ParentId: &quot;</span> &amp; parentId &amp; <span class="stringliteral">&quot;, LastFillPrice: &quot;</span> &amp; lastFillPrice &amp;</div>
<div class="line">                <span class="stringliteral">&quot;, ClientId: &quot;</span> &amp; clientId &amp; <span class="stringliteral">&quot;, WhyHeld: &quot;</span> &amp; whyHeld)</div>
<div class="line">        End Sub</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><span class="keyword">class </span>TestCppClient : <span class="keyword">public</span> EWrapper</div>
<div class="line">{</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><span class="keywordtype">void</span> TestCppClient::orderStatus(OrderId orderId, <span class="keyword">const</span> std::string&amp; status, <span class="keywordtype">double</span> filled,</div>
<div class="line">        <span class="keywordtype">double</span> remaining, <span class="keywordtype">double</span> avgFillPrice, <span class="keywordtype">int</span> permId, <span class="keywordtype">int</span> parentId,</div>
<div class="line">        <span class="keywordtype">double</span> lastFillPrice, <span class="keywordtype">int</span> clientId, <span class="keyword">const</span> std::string&amp; whyHeld){</div>
<div class="line">    printf(<span class="stringliteral">&quot;OrderStatus. Id: %ld, Status: %s, Filled: %g, Remaining: %g, AvgFillPrice: %g, PermId: %d, LastFillPrice: %g, ClientId: %d, WhyHeld: %s\n&quot;</span>, orderId, status.c_str(), filled, remaining, avgFillPrice, permId, lastFillPrice, clientId, whyHeld.c_str());</div>
<div class="line">}</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">class </span>TestWrapper(wrapper.EWrapper):</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;    <span class="keyword">def </span>orderStatus(self, orderId:OrderId , status:str, filled:float,</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;                    remaining:float, avgFillPrice:float, permId:int, </div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;                    parentId:int, lastFillPrice:float, clientId:int, </div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;                    whyHeld:str):</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;        super().orderStatus(orderId, status, filled, remaining,</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;            avgFillPrice, permId, parentId, lastFillPrice, clientId, whyHeld)</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;        print(<span class="stringliteral">&quot;OrderStatus. Id:&quot;</span>, orderId, <span class="stringliteral">&quot;Status:&quot;</span>, status, <span class="stringliteral">&quot;Filled:&quot;</span>, filled,</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;            <span class="stringliteral">&quot;Remaining:&quot;</span>, remaining ,<span class="stringliteral">&quot;AvgFillPrice:&quot;</span>, avgFillPrice,</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;            <span class="stringliteral">&quot;PermId:&quot;</span>, permId, <span class="stringliteral">&quot;ParentId:&quot;</span>, parentId, <span class="stringliteral">&quot;LastFillPrice:&quot;</span>,</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;            lastFillPrice, <span class="stringliteral">&quot;ClientId:&quot;</span>, clientId, <span class="stringliteral">&quot;WhyHeld:&quot;</span>,whyHeld)</div>
</div><!-- fragment -->  </li>
</ul>
<p>There are several different categories a client might fall into which determine the orderStatus messages it receives:</p>
<p>-&gt;Clients with the ID of the client submitting the order will receive order status messages indicating changes in the order status.</p>
<p>-&gt;The client with <a class="el" href="initial_setup.html#master_client">Master Client ID</a> (set in TWS/IBG) will receive order status messages for all clients.</p>
<p>-&gt;Client ID 0 will receive order status messages for its own (client ID 0) orders and also for orders submitted manually from TWS.</p>
<p>Other important points concerning <a class="el" href="interfaceIBApi_1_1EWrapper.html#a225c060ff9653cfaeff7304033eb76b3">IBApi.EWrapper.orderStatus</a> :</p>
<p>-&gt;Typically there are duplicate orderStatus messages with the same information that will be received by a client. This corresponds to messages sent back from TWS, the IB server, or the exchange.</p>
<p>-&gt;There are not guaranteed to be orderStatus callbacks for every change in order status. For example with market orders when the order is accepted and executes immediately, there commonly will not be any corresponding orderStatus callbacks. For that reason it is recommended to monitor the <a class="el" href="interfaceIBApi_1_1EWrapper.html#a09f82de3d0666d13b00b5168e8b9313d">IBApi.EWrapper.execDetails</a> function in addition to <a class="el" href="interfaceIBApi_1_1EWrapper.html#a225c060ff9653cfaeff7304033eb76b3">IBApi.EWrapper.orderStatus</a>.</p>
<h1><a class="anchor" id="order_attach"></a>
Attaching Orders</h1>
<p>Advanced orders such as <a class="el" href="bracket_order.html">Bracket Orders</a> or <a class="el" href="hedging.html">Hedging</a> involve attaching child orders to a parent. This can be easily done via the <a class="el" href="classIBApi_1_1Order.html#a37c8c925a01a8a35a1dfb942afeba264">IBApi.Order.ParentId</a> attribute by assigning a child order's <a class="el" href="classIBApi_1_1Order.html#a37c8c925a01a8a35a1dfb942afeba264">IBApi.Order.ParentId</a> to an existing order's <a class="el" href="classIBApi_1_1Order.html#ac2926db25ae147030a1cf519c07d86a6">IBApi.Order.OrderId</a>. When an order is attached to another, the system will keep the child order 'on hold' until its parent fills. Once the parent order is completely filled, its children will automatically become active.</p>
<p><b>Important:</b> When attaching orders and to prevent accidental executions it is a very good idea to make use of the <a class="el" href="classIBApi_1_1Order.html#aaa1c4f31b9580ee0715edcd78a51cbec">IBApi.Order.Transmit</a> flag as demonstrated in <a class="el" href="bracket_order.html">Bracket Orders</a></p>
<h1><a class="anchor" id="order_margin"></a>
Checking Margin Requirements</h1>
<p>It is possible to obtain the margin and commissions information for a given order <em>before</em> submitting it by assigning the <a class="el" href="classIBApi_1_1Order.html#a657f43100729808a833b9c01adeeb165">IBApi.Order.WhatIf</a> flag to true. Invoking placeOrder with the whatif flag set to true will result in the order not being actually placed but rather used as a query. The margin and commissions information will be returned via the <a class="el" href="interfaceIBApi_1_1EWrapper.html#aa05258f1d005accd3efc0d60bc151407">IBApi.EWrapper.openOrder</a> callback through its <a class="el" href="classIBApi_1_1OrderState.html">IBApi.OrderState</a> object.</p>
<p><br/>
<br/>
 </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.4-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">This website uses cookies. By navigating through it you agree to the use of cookies. Copyright Interactive Brokers 2016 </li>
  </ul>
</div>
<!--BEGIN GCS_SEARCHBOX-->
<style type='text/css'>
	.gsc-control-cse{
		font family: Arial, sans-serif;
		border-color: #000100;
		background-color: #000000;
		width:250px;
		height: 20px;
		padding-top: 6px;
	}
	input.gsc-search-button {
		background-color: #6D1800;
		color: #fff;
		cursor: pointer;
	}
	input.gsc-search-button:hover {
		background-color: #A02200;
	}
	td.gsc-clear-button {
		position: relative;
		right: 85px;
	}
  }
</style>
<!--END GCS_SEARCHBOX-->
</body>
</html>
