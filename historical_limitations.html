<!-- HTML header for doxygen 1.8.4-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<title>TWS API v9.72+: Historical Data Limitations</title>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="https://www.interactivebrokers.com/favicon.ico" rel="shortcut icon">
<script>
$(document).ready(function(){
		var picked=getCookie("picked");
		if (picked != "") {
			if (!$(this).hasClass("active")) {
				var tabNum = $(this).index();
				var nthChild = picked;
				$("ul#tabs li.active").removeClass("active");
				$(this).addClass("active");
				$("ul#tab li.active").removeClass("active");
				$("ul#tab li:nth-child("+nthChild+")").addClass("active");
				$("ul#tabs li:nth-child("+nthChild+")").addClass("active");
				setCookie("picked", nthChild, 1);
			}
		}
		$("ul#tabs li").click(function(e){
			if (!$(this).hasClass("active")) {
			var tabNum = $(this).index();
			var nthChild = tabNum+1;
			$("ul#tabs li.active").removeClass("active");
			$(this).addClass("active");
			$("ul#tab li.active").removeClass("active");
			$("ul#tab li:nth-child("+nthChild+")").addClass("active");
			setCookie("picked", nthChild, 1);
		}
    });
});
function setCookie(cname, cvalue, exdays) {
    var d = new Date();
    d.setTime(d.getTime() + (exdays*24*60*60*1000));
    var expires = "expires="+d.toUTCString();
    document.cookie = cname + "=" + cvalue + "; " + expires;
} 
function getCookie(cname) {
    var name = cname + "=";
    var ca = document.cookie.split(';');
    for(var i=0; i<ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1);
        if (c.indexOf(name) == 0) return c.substring(name.length,c.length);
    }
    return "";
} 
function checkCookie() {
    var picked=getCookie("picked");
    if (picked != "") {
        alert("Welcome again " + picked);
    }else{
        //username = prompt("Please enter your name:", "");
        if (picked != "" && picked != null) {
            setCookie("picked", 1, 365);
        }
    }
}
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ib_theme.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" style="background-color:black;">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr>
  <td id="projectlogo"><img alt="Logo" src="nav_iblogo.png"/></a></td>
  <td style="padding: 0 0 0 1em;">
   <ul id="tabs"><li class="active">C#</li><li>Java</li><li>VB</li><li>C++</li><li>Python</li></ul>
  </td>
  <td><a href="https://www.interactivebrokers.com/en/index.php?f=customerService&p=email" style="color:#C7C7C7;font-weight:bold;padding: 0 0 0 1em;">Contact us</a></td>
  <!--BEGIN GCS_SEARCHBOX-->
  <td style="position: absolute; right: 0;">
   <div id="google-custom-search" align="right" style="vertical-align: top;">
   <script>
  (function() {
    var cx = '002885114636493240026:q6smajphkxq';
	var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
	</script>
	<gcse:search newWindow="false" enableHistory="true"></gcse:search>
   </div>
   </td>
  <!--END !GCS_SEARCHBOX-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('historical_limitations.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Historical Data Limitations </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The maximum number of simultaneous open historical data requests from the API is 50. In practice, it will probably be more efficient to have a much smaller number of requests pending at a time.</p>
<h1><a class="anchor" id="pacing_violations"></a>
Pacing Violations for Small Bars (30 secs or less)</h1>
<p>Although Interactive Brokers offers our clients high quality market data, IB is not a specialised market data provider and as such it is forced to put in place restrictions to limit traffic which is not directly associated to trading. A <b>Pacing Violation<sup>1</sup></b> occurs whenever one or more of the following restrictions is not observed:</p>
<ul>
<li>Making identical historical data requests within 15 seconds.</li>
<li>Making six or more historical data requests for the same Contract, Exchange and Tick Type within two seconds.</li>
<li>Making more than 60 requests within any ten minute period.</li>
</ul>
<p><em>Note that when BID_ASK historical data is requested, each request is counted <b>twice</b>. In a nutshell, the information above can simply be put as "do not request too much data too quick".</em></p>
<p><b>Important:</b> the above limitations apply to all our clients and it is not possible to overcome them. If your trading strategy's market data requirements are not met by our market data services please consider contacting a specialised provider.</p>
<h1><a class="anchor" id="hd_step_sizes"></a>
Step Sizes</h1>
<p>A step size is defined as the ratio between the historical data request's duration period and its granularity (i.e. bar size). Historical Data requests need to be assembled in such a way that only a few thousand bars are returned at a time. The following table exemplifies this concept:</p>
<table class="doxtable">
<tr>
<th>Duration</th><th>Allowed Bar Sizes </th></tr>
<tr>
<td>60 S</td><td>1 sec - 1 mins </td></tr>
<tr>
<td>120 S</td><td>1 sec - 2 mins </td></tr>
<tr>
<td>1800 S (30 mins)</td><td>1 sec - 30 mins </td></tr>
<tr>
<td>3600 S (1 hr)</td><td>5 secs - 1 hr </td></tr>
<tr>
<td>14400 S (4hr)</td><td>10 secs - 3 hrs </td></tr>
<tr>
<td>28800 S (8 hrs)</td><td>30 secs - 8 hrs </td></tr>
<tr>
<td>1 D</td><td>1 min - 1 day </td></tr>
<tr>
<td>2 D</td><td>2 mins - 1 day </td></tr>
<tr>
<td>1 W</td><td>3 mins - 1 week </td></tr>
<tr>
<td>1 M</td><td>30 mins - 1 month </td></tr>
<tr>
<td>1 Y</td><td>1 day - 1 month </td></tr>
</table>
<h1><a class="anchor" id="hd_availability"></a>
Data Availability for Stocks</h1>
<p>The <b>minimum</b> expected historical data availability for stocks is one year, and depends on the user's maximum <a class="el" href="market_data.html#market_lines">Market Data Lines</a> :</p>
<table class="doxtable">
<tr>
<th>Years of Historical Data</th><th>Lines required</th><th>Required monthly commissions</th><th>Required monthly equity</th><th>Booster packs </th></tr>
<tr>
<td>One year </td><td>0 - 499 </td><td>Less than USD 4000 </td><td>Less Then USD 5,000,000 </td><td>0  </td></tr>
<tr>
<td>Two years </td><td>500 - 749 </td><td>USD 4,000 </td><td>USD 5,000,000 </td><td>4   </td></tr>
<tr>
<td>Three years </td><td>750 - 999 </td><td>USD 6,000 </td><td>USD 7,500,000 </td><td>7  </td></tr>
<tr>
<td>Four years </td><td>1000 - 1249 </td><td>USD 8,000 </td><td>USD 10,000,000 </td><td>9  </td></tr>
<tr>
<td>Five years </td><td>1250 - 1499 </td><td>USD 10,000 </td><td>USD 12,500,000 </td><td>N/A (1)  </td></tr>
</table>
<p>(1) The maximum number of Quote Booster packs per user name is 10.</p>
<h1><a class="anchor" id="non-available_hd"></a>
Unavailable Historical Data</h1>
<ul>
<li>Tick-by-tick historical data. The smallest bar size is 1 second.</li>
<li>Studies and indicators such as Weighted Moving Averages or Bollinger Bands.</li>
<li>Bars which size is 30 seconds or less <b>older than six months</b></li>
<li>Expired futures data older than two years counting from the future's expiration date.</li>
<li>Data for continuous futures contracts</li>
<li>Expired options, FOPs, warrants and structured products.</li>
<li>End of Day (EOD) data for options, FOPs, warrants and structured products.</li>
<li>Data for expired future spreads</li>
<li>Data for securities which are no longer trading.</li>
</ul>
<p><em> <em><b>Note:</b></em></em></p>
<p><em> <em>1. At this time Historical Data Limitations for barSize = "1 mins" and greater have been lifted. However, please use caution when requesting large amounts of historical data or sending historical data requests too frequently. Though IB has lifted the "hard" limit, we still implement a "soft" slow to load-balance client requests vs. server response. Requesting too much historical data can lead to throttling and eventual disconnect of the API client. If a request requires more than several minutes to return data, it would be best to cancel the request using the <a class="el" href="classIBApi_1_1EClient.html#ab27324bd18e7022e26ac4520808b919f">IBApi.EClient.cancelHistoricalData</a> function. </em> </em></p>
<p><br />
<br />
 </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.4-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">This website uses cookies. By navigating through it you agree to the use of cookies. Copyright Interactive Brokers 2016 </li>
  </ul>
</div>
<!--BEGIN GCS_SEARCHBOX-->
<style type='text/css'>
	.gsc-control-cse{
		font family: Arial, sans-serif;
		border-color: #000100;
		background-color: #000000;
		width:260px;
		height: 20px;
		padding-top: 6px;
	}
	input.gsc-search-button {
		background-color: #6D1800;
		color: #fff;
		cursor: pointer;
	}
	input.gsc-search-button:hover {
		background-color: #A02200;
	}
	td.gsc-clear-button {
		position: relative;
		right: 85px;
	}
  }
</style>
<!--END GCS_SEARCHBOX-->
</body>
</html>
